<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="category">


	<insert id="insert" parameterType="categoryvo">
		insert into category(category_name, parent)
			values( #{category_name}, #{parent})
		
		<selectKey keyProperty="category_no" resultType="int" order="AFTER">
			select last_insert_id()
		</selectKey>		
	</insert>
	
	<select id="getListByNo" parameterType="int" resultType="categoryvo">
		select * from category where parent = #{category_no}
	</select>
	
	<update id="update" parameterType="categoryvo">
		update category set category_name = #{category_name}, parent = #{parent}
		where category_no = #{category_no}
	</update>
	
	<select id="getList" resultType="categoryvo">
		select * from category
	</select>
	
	<delete id="deleteAll">
		delete from category
	</delete>
	
	
	<select id="checkCategoryNo" parameterType="int" resultType="int">
		select count(*) as number from category where category_no = #{category_no}
	</select>
	
	<delete id="delete" parameterType="int">
		delete from category where category_no = #{category_no}
	</delete>
	
	<delete id="deleteCategoryProduct" parameterType="int">
		delete from category_product where category_no = #{category_no} 
	</delete>
	
	<insert id="insertCategoryProduct" parameterType="categoryvo">
		insert into category_product(product_no, category_no)
			values(#{product_no}, #{category_no})
	</insert>
	
</mapper>
